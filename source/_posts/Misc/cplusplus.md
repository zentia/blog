---
title: C和C++混合编程（__cplusplus与external "c"的使用）
mathjax: true
date: 2019-03-28 14:19:33
tags:
    C++
categories: C++
---
# 第一种理解
比如说你用C++开发了一个DLL库，为了能够让C语言也能够调用你的DLL输出（Export）的函数，你需要用extern "C"来强制编译器不要修改你的函数名。
通常，在C语言的头文件中经常可以看到类似下面这种形式的代码：
```C
#ifdef __cplusplus
extern "C" {
#endif
/*some declaration or so*/
#ifdef __cplusplus
}
#endif
```
那么这种写法有什么用呢？实际上，这是为了让CPP能够在C环境下使用而采取的一种语法形式。之所以采用这种方式，是因为两种语言之间的一些差异。由于CPP支持多态性，也就是具有相同函数名的函数可以完成不同的功能，CPP通常是通过参数区分具体调用的是哪一个函数。在编译的时候，CPP编译器会将参数类型和函数名连接再也一起，于是在程序编译成为目标文件以后，CPP编译器可以直接根据目标文件中的符号名，将多个目标文件连接成一个目标文件或者可执行文件。但是在C语言中，由于完全没有多态性的概念，C编译器在编译时除了会在函数名钱添加一个下划线之外，什么也不会做。由于这种原因，当采用CPP与C混合编程的时候，就可能出现问题。假设一个头文件定义了这样的函数：
```C
int foo(int a,int b);
```